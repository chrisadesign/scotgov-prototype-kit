<header class="ds_site-header {{ params.classes if params.classes }}" role="banner" {%- for attribute, value in params.attributes %} {{attribute}}="{{value}}" {% endfor %}>
  <div class="ds_wrapper">
    <div class="ds_site-header__content">
      <div class="ds_site-branding">
        <a href="{{ params.homepageUrl | default('/') }}" class="ds_site-branding__logo  ds_site-branding__link">
          <img class="ds_site-branding__logo-image" alt="Scottish Government" src="/public/images/logos/scottish-government.svg">
        </a>

        {% if (params.serviceName) %}
          <span class="ds_site-branding__title">
            {{ params.serviceName }}
          </span>
        {% endif %}
      </div>

      {% if params.navigation %}
        <nav data-module="ds-mobile-navigation-menu">
          <button class="js-toggle-menu  ds_mobile-navigation__button" aria-expanded="false" aria-controls="mobile-navigation-menu">
            <span class="ds_site-header__control-text">Menu</span>

            <svg class="ds_icon  ds_site-header__control-icon" aria-hidden="true" role="img">
              <use xlink:href="/public/images/icons/icons.stack.svg#menu"></use>
            </svg>
            <svg class="ds_icon  ds_site-header__control-icon--close  ds_site-header__control-icon" aria-hidden="true" role="img">
              <use xlink:href="/public/images/icons/icons.stack.svg#close"></use>
            </svg>
          </button>

          <div class="ds_mobile-navigation" id="mobile-navigation-menu" data-offsetselector=".ds_site-header">
            <div class="ds_mobile-navigation__content">

              <div class="ds_mobile-navigation__block">
                <ul class="ds_mobile-navigation__list">
                  {% for item in params.navigation %}
                    {% if item.text or item.html %}
                      <li class="ds_site-navigation__item{{ ' ds_current' if item.active }}">
                        {% if item.href %}
                          <a class="ds_mobile-navigation__link" href="{{ item.href }}" {% for attribute, value in item.attributes %} {{attribute}}="{{value}}" {% endfor %}>
                          {% endif %}
                          {{ item.html | safe if item.html else item.text }}
                          {% if item.href %}
                          </a>
                        {% endif %}
                      </li>
                    {% endif %}
                  {% endfor %}
                </ul>
              </div>

              <button type="button" class="ds_mobile-navigation__backdrop  js-close-menu" aria-expanded="false" aria-controls="mobile-navigation-menu">
                <span class="visually-hidden">Close menu</span>
              </button>
            </div>
          </div>
        </nav>
      {% endif %}
    </div>
  </div>

  {% if params.banner %}
    <div class="ds_phase-banner">
      <div class="ds_wrapper">
        <p class="ds_phase-banner__content">
          <strong class="ds_tag  ds_phase-banner__tag">
            {{ params.banner.tag }}
          </strong>
          <span class="ds_phase-banner__text">
            {{ params.banner.text }}
          </span>
        </p>
      </div>
    </div>
  {% endif %}

  {% if params.navigation %}
    <div class="ds_site-header__navigation">
      <div class="ds_wrapper">
        <nav class="ds_site-navigation">
          <ul class="ds_site-navigation__list">
            {% for item in params.navigation %}
              {% if item.text or item.html %}
                <li class="ds_site-navigation__item">
                  {% if item.href %}
                    <a class="ds_site-navigation__link{{ ' ds_current' if item.active }}" href="{{ item.href }}" {% for attribute, value in item.attributes %} {{attribute}}="{{value}}" {% endfor %}>
                      {{ item.html | safe if item.html else item.text }}
                    </a>
                  {% else %}
                    <span class="ds_site-navigation__link{{ ' ds_current' if item.active }}" {% for attribute, value in item.attributes %} {{attribute}}="{{value}}" {% endfor %}>
                      {{ item.html | safe if item.html else item.text }}
                    </span>
                  {% endif %}
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </nav>
      </div>
    </div>
  {% endif %}

</header>
